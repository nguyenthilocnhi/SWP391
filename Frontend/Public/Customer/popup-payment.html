<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Demo payment</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f0fdf4;
      margin: 0;
      padding: 0;
    }

    .booking-section {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px 16px;
    }

    .form-container {
      background: #ffffff;
      padding: 32px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(34, 197, 94, 0.1);
      max-width: 500px;
      width: 100%;
      border: 2px solid #34D399;
    }

    .form-container h2 {
      text-align: center;
      margin-bottom: 24px;
      color: #059669;
    }

    label {
      font-weight: 600;
      margin-top: 16px;
      display: block;
      color: #065f46;
    }

    input,
    select,
    textarea {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #a7f3d0;
      border-radius: 8px;
      font-size: 14px;
      background-color: #f0fdf4;
      transition: border 0.3s;
      box-sizing: border-box;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: #34D399;
    }

    button {
      margin-top: 24px;
      width: 100%;
      padding: 12px;
      background-color: #10B981;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #059669;
    }

    /* Payment Popup Styles */
    .popup-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      backdrop-filter: blur(5px);
    }

    .popup-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border-radius: 16px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      animation: popupSlideIn 0.3s ease-out;
    }

    @keyframes popupSlideIn {
      from {
        opacity: 0;
        transform: translate(-50%, -60%);
      }
      to {
        opacity: 1;
        transform: translate(-50%, -50%);
      }
    }

    .popup-header {
      background: linear-gradient(135deg, #10B981, #059669);
      color: white;
      padding: 20px 30px;
      border-radius: 16px 16px 0 0;
      position: relative;
    }

    .popup-header h3 {
      margin: 0;
      font-size: 20px;
      font-weight: 600;
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s;
    }

    .close-btn:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .popup-content {
      padding: 30px;
    }

    .booking-summary {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 25px;
    }

    .booking-summary h4 {
      color: #059669;
      margin: 0 0 15px 0;
      font-size: 16px;
    }

    .summary-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      padding: 5px 0;
    }

    .summary-item:last-child {
      border-top: 1px solid #bbf7d0;
      padding-top: 10px;
      margin-top: 10px;
      font-weight: bold;
      color: #059669;
    }

    .payment-methods {
      margin-bottom: 25px;
    }

    .payment-methods h4 {
      color: #065f46;
      margin-bottom: 15px;
    }

    .payment-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
    }

    .payment-option {
      border: 2px solid #d1fae5;
      border-radius: 10px;
      padding: 15px 10px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #f9fffe;
    }

    .payment-option:hover {
      border-color: #34D399;
      background: #ecfdf5;
    }

    .payment-option.selected {
      border-color: #10B981;
      background: #d1fae5;
      color: #059669;
    }

    .payment-option .icon {
      font-size: 24px;
      margin-bottom: 5px;
    }

    .payment-option .name {
      font-size: 12px;
      font-weight: 600;
    }

    .payment-form {
      display: none;
      margin-top: 20px;
    }

    .payment-form.active {
      display: block;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      color: #065f46;
      font-weight: 600;
      margin-bottom: 8px;
      display: block;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 1px solid #d1fae5;
      border-radius: 8px;
      font-size: 14px;
      background: #f9fffe;
      box-sizing: border-box;
    }

    .form-group input:focus {
      border-color: #10B981;
      outline: none;
    }

    .form-row {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 15px;
    }

    .security-note {
      background: #f0f9ff;
      border: 1px solid #bae6fd;
      border-radius: 8px;
      padding: 12px;
      margin: 20px 0;
      font-size: 13px;
      color: #0369a1;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .security-note:before {
      content: "üîí";
    }

    .popup-actions {
      display: flex;
      gap: 15px;
      margin-top: 25px;
    }

    .btn-cancel {
      flex: 1;
      padding: 12px;
      border: 2px solid #d1fae5;
      background: white;
      color: #059669;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-cancel:hover {
      background: #f0fdf4;
      border-color: #10B981;
    }

    .btn-pay {
      flex: 2;
      padding: 12px;
      background: linear-gradient(135deg, #10B981, #059669);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-pay:hover {
      transform: translateY(-1px);
      box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
    }

    .btn-pay:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .loading {
      display: none;
      text-align: center;
      padding: 40px;
    }

    .spinner {
      border: 3px solid #d1fae5;
      border-top: 3px solid #10B981;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .success-message {
      display: none;
      text-align: center;
      padding: 40px;
      color: #059669;
    }

    .success-message .icon {
      font-size: 60px;
      margin-bottom: 20px;
    }

    @media (max-width: 600px) {
      .form-container {
        padding: 20px;
      }
      
      .popup-container {
        width: 95%;
      }
      
      .popup-content {
        padding: 20px;
      }
      
      .payment-options {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .form-row {
        grid-template-columns: 1fr;
      }
      
      .popup-actions {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>

  <section class="booking-section">
    <div class="form-container">
      <h2>ƒê·∫∑t L·ªãch X√©t Nghi·ªám</h2>
      <form onsubmit="return handleTestBooking(event)">
        <label>H·ªç v√† t√™n <span>*</span></label>
        <input type="text" id="hoten" required>

        <label>S·ªë ƒëi·ªán tho·∫°i <span>*</span></label>
        <input type="tel" id="sdt" required>

        <label>Ng√†y x√©t nghi·ªám <span>*</span></label>
        <input type="date" id="ngay" required>

        <label>Gi·ªù x√©t nghi·ªám <span>*</span></label>
        <input type="time" id="gio" required>

        <label>Lo·∫°i x√©t nghi·ªám <span>*</span></label>
        <select id="loaiXetNghiem" required>
          <option value="">-- Ch·ªçn lo·∫°i --</option>
          <option value="HIV Ag/Ab combo (HIV test th·∫ø h·ªá 4)" data-price="350000">X√©t nghi·ªám HIV - 350.000ƒë</option>
          <option value="Giang mai (RPR/TPHA)" data-price="280000">X√©t nghi·ªám Giang Mai - 280.000ƒë</option>
          <option value="L·∫≠u (PCR ho·∫∑c nhu·ªôm soi)" data-price="450000">X√©t nghi·ªám L·∫≠u - 450.000ƒë</option>
          <option value="Chlamydia(PCR)" data-price="420000">X√©t nghi·ªám PCR - 420.000ƒë</option>
          <option value="HPV" data-price="680000">X√©t nghi·ªám C·ªï T·ª≠ Cung - 680.000ƒë</option>
          <option value="Virus Zika" data-price="550000">X√©t nghi·ªám Virus Zika - 550.000ƒë</option>
          <option value="Pap smear" data-price="320000">X√©t nghi·ªám T·∫ø b√†o h·ªçc c·ªï t·ª≠ cung - 320.000ƒë</option>
          <option value="S√πi m√†o g√†(HPV tu√Ωp nguy c∆° th·∫•p)" data-price="580000">X√©t nghi·ªám S√πi M√†o G√† - 580.000ƒë</option>
          <option value="Herpes Simplex Virus" data-price="480000">X√©t nghi·ªám HSV 1 & 2 - 480.000ƒë</option>
          <option value="H·∫° cam m·ªÅm" data-price="380000">X√©t nghi·ªám Chancroid - 380.000ƒë</option>
          <option value="R·∫≠n mu" data-price="250000">X√©t nghi·ªám Pubic lice - 250.000ƒë</option>
        </select>

        <label>Ghi ch√∫ / Y√™u c·∫ßu ƒë·∫∑c bi·ªát</label>
        <textarea id="ghichu" rows="3" placeholder="(Kh√¥ng b·∫Øt bu·ªôc)"></textarea>

        <button type="submit">ƒê·∫∑t l·ªãch</button>
      </form>
    </div>
  </section>

  <!-- Payment Popup -->
  <div class="popup-overlay" id="paymentPopup">
    <div class="popup-container">
      <div class="popup-header">
        <h3>üè• Thanh To√°n D·ªãch V·ª• X√©t Nghi·ªám</h3>
        <button class="close-btn" onclick="closePaymentPopup()">&times;</button>
      </div>
      
      <div class="popup-content">
        <div class="booking-summary">
          <h4>üìã Th√¥ng Tin ƒê·∫∑t L·ªãch</h4>
          <div class="summary-item">
            <span>H·ªç t√™n:</span>
            <span id="summary-name"></span>
          </div>
          <div class="summary-item">
            <span>Ng√†y kh√°m:</span>
            <span id="summary-date"></span>
          </div>
          <div class="summary-item">
            <span>Gi·ªù kh√°m:</span>
            <span id="summary-time"></span>
          </div>
          <div class="summary-item">
            <span>Lo·∫°i x√©t nghi·ªám:</span>
            <span id="summary-service"></span>
          </div>
          <div class="summary-item">
            <span>T·ªïng chi ph√≠:</span>
            <span id="summary-total"></span>
          </div>
        </div>

        <div class="payment-methods">
          <h4>üí≥ Ch·ªçn Ph∆∞∆°ng Th·ª©c Thanh To√°n</h4>
          <div class="payment-options">
            <div class="payment-option" data-method="card">
              <div class="icon">üí≥</div>
              <div class="name">Th·∫ª t√≠n d·ª•ng</div>
            </div>
            <div class="payment-option" data-method="momo">
              <div class="icon">üì±</div>
              <div class="name">MoMo</div>
            </div>
            <div class="payment-option" data-method="banking">
              <div class="icon">üè¶</div>
              <div class="name">Internet Banking</div>
            </div>
            <div class="payment-option" data-method="cash">
              <div class="icon">üíµ</div>
              <div class="name">Ti·ªÅn m·∫∑t t·∫°i c∆° s·ªü</div>
            </div>
          </div>
        </div>

        <div class="payment-form" id="card-form">
          <div class="form-group">
            <label>S·ªë th·∫ª</label>
            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Ng√†y h·∫øt h·∫°n</label>
              <input type="text" id="expiry" placeholder="MM/YY" maxlength="5">
            </div>
            <div class="form-group">
              <label>CVV</label>
              <input type="text" id="cvv" placeholder="123" maxlength="4">
            </div>
          </div>
          <div class="form-group">
            <label>T√™n tr√™n th·∫ª</label>
            <input type="text" id="cardName" placeholder="NGUYEN VAN A">
          </div>
        </div>

        <div class="payment-form" id="momo-form">
          <div class="form-group">
            <label>S·ªë ƒëi·ªán tho·∫°i MoMo</label>
            <input type="tel" id="momoPhone" placeholder="0901234567">
          </div>
          <p style="color: #6b7280; font-size: 14px; margin-top: 10px;">
            üí° B·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c th√¥ng b√°o tr√™n ·ª©ng d·ª•ng MoMo ƒë·ªÉ x√°c nh·∫≠n thanh to√°n.
          </p>
        </div>

        <div class="payment-form" id="banking-form">
          <div class="form-group">
            <label>Ch·ªçn ng√¢n h√†ng</label>
            <select id="bankSelect">
              <option value="">-- Ch·ªçn ng√¢n h√†ng --</option>
              <option value="vietcombank">Vietcombank</option>
              <option value="techcombank">Techcombank</option>
              <option value="bidv">BIDV</option>
              <option value="vietinbank">VietinBank</option>
              <option value="mb">MB Bank</option>
            </select>
          </div>
        </div>

        <div class="payment-form active" id="cash-form">
          <p style="color: #059669; font-size: 14px; line-height: 1.6;">
            ‚úÖ <strong>Thanh to√°n t·∫°i c∆° s·ªü y t·∫ø</strong><br>
            B·∫°n c√≥ th·ªÉ thanh to√°n b·∫±ng ti·ªÅn m·∫∑t khi ƒë·∫øn l√†m x√©t nghi·ªám. Vui l√≤ng mang theo ƒë·ªß s·ªë ti·ªÅn v√† ƒë·∫øn ƒë√∫ng gi·ªù ƒë√£ ƒë·∫∑t.
          </p>
        </div>

        <div class="security-note">
          Th√¥ng tin thanh to√°n ƒë∆∞·ª£c m√£ h√≥a v√† b·∫£o m·∫≠t tuy·ªát ƒë·ªëi
        </div>

        <div class="popup-actions" id="payment-actions">
          <button class="btn-cancel" onclick="closePaymentPopup()">H·ªßy</button>
          <button class="btn-pay" onclick="processPayment()">X√°c Nh·∫≠n ƒê·∫∑t L·ªãch</button>
        </div>

        <div class="loading" id="payment-loading">
          <div class="spinner"></div>
          <p>ƒêang x·ª≠ l√Ω thanh to√°n...</p>
        </div>

        <div class="success-message" id="payment-success">
          <div class="icon">‚úÖ</div>
          <h3>ƒê·∫∑t l·ªãch th√†nh c√¥ng!</h3>
          <p>C·∫£m ∆°n b·∫°n ƒë√£ ƒë·∫∑t l·ªãch. Ch√∫ng t√¥i s·∫Ω g·ª≠i th√¥ng tin x√°c nh·∫≠n qua SMS v√† email.</p>
          <button class="btn-pay" onclick="closePaymentPopup(); window.location.reload();">Ho√†n T·∫•t</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let bookingData = {};

    // T·ª± ƒë·ªông ƒëi·ªÅn d·ªØ li·ªáu n·∫øu c√≥
    document.addEventListener("DOMContentLoaded", function () {
      // Kh√¥ng s·ª≠ d·ª•ng localStorage ƒë·ªÉ tr√°nh l·ªói trong artifacts
      
      // Set minimum date to today
      const today = new Date().toISOString().split('T')[0];
      document.getElementById("ngay").setAttribute('min', today);
    });

    function handleTestBooking(event) {
      event.preventDefault();

      const hoTen = document.getElementById("hoten").value;
      const sdt = document.getElementById("sdt").value;
      const ngay = document.getElementById("ngay").value;
      const gio = document.getElementById("gio").value;
      const loaiSelect = document.getElementById("loaiXetNghiem");
      const loai = loaiSelect.value;
      const price = loaiSelect.selectedOptions[0]?.getAttribute('data-price') || '0';
      const ghiChu = document.getElementById("ghichu").value;

      if (!hoTen || !sdt || !ngay || !gio || !loai) {
        alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc.");
        return false;
      }

      bookingData = {
        hoTen,
        sdt,
        ngay,
        gio,
        loaiXetNghiem: loai,
        price: parseInt(price),
        ghiChu
      };

      showPaymentPopup();
      return false;
    }

    function showPaymentPopup() {
      // Fill summary information
      document.getElementById("summary-name").textContent = bookingData.hoTen;
      document.getElementById("summary-date").textContent = formatDate(bookingData.ngay);
      document.getElementById("summary-time").textContent = bookingData.gio;
      document.getElementById("summary-service").textContent = bookingData.loaiXetNghiem;
      document.getElementById("summary-total").textContent = formatPrice(bookingData.price);

      document.getElementById("paymentPopup").style.display = "block";
      document.body.style.overflow = "hidden";
    }

    function closePaymentPopup() {
      document.getElementById("paymentPopup").style.display = "none";
      document.body.style.overflow = "auto";
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('vi-VN', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
    }

    function formatPrice(price) {
      return price.toLocaleString('vi-VN') + 'ƒë';
    }

    // Payment method selection
    document.querySelectorAll('.payment-option').forEach(option => {
      option.addEventListener('click', function() {
        document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('selected'));
        this.classList.add('selected');
        
        const method = this.getAttribute('data-method');
        document.querySelectorAll('.payment-form').forEach(form => form.classList.remove('active'));
        document.getElementById(method + '-form').classList.add('active');
        
        // Update button text based on payment method
        const payButton = document.querySelector('.btn-pay');
        if (method === 'cash') {
          payButton.textContent = 'X√°c Nh·∫≠n ƒê·∫∑t L·ªãch';
        } else {
          payButton.textContent = 'Thanh To√°n ' + formatPrice(bookingData.price);
        }
      });
    });

    // Format card number
    document.getElementById('cardNumber').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      value = value.replace(/(\d{4})(?=\d)/g, '$1 ');
      e.target.value = value;
    });

    // Format expiry date
    document.getElementById('expiry').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length >= 2) {
        value = value.substring(0,2) + '/' + value.substring(2,4);
      }
      e.target.value = value;
    });

    // CVV only numbers
    document.getElementById('cvv').addEventListener('input', function(e) {
      e.target.value = e.target.value.replace(/\D/g, '');
    });

    function processPayment() {
      const selectedMethod = document.querySelector('.payment-option.selected');
      if (!selectedMethod) {
        alert('Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n!');
        return;
      }

      const method = selectedMethod.getAttribute('data-method');
      
      // Basic validation based on payment method
      if (method === 'card') {
        const cardNumber = document.getElementById('cardNumber').value;
        const expiry = document.getElementById('expiry').value;
        const cvv = document.getElementById('cvv').value;
        const cardName = document.getElementById('cardName').value;
        
        if (!cardNumber || !expiry || !cvv || !cardName) {
          alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin th·∫ª!');
          return;
        }
      } else if (method === 'momo') {
        const momoPhone = document.getElementById('momoPhone').value;
        if (!momoPhone) {
          alert('Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i MoMo!');
          return;
        }
      } else if (method === 'banking') {
        const bankSelect = document.getElementById('bankSelect').value;
        if (!bankSelect) {
          alert('Vui l√≤ng ch·ªçn ng√¢n h√†ng!');
          return;
        }
      }

      // Show loading
      document.getElementById('payment-actions').style.display = 'none';
      document.getElementById('payment-loading').style.display = 'block';

      // Simulate payment processing
      setTimeout(() => {
        document.getElementById('payment-loading').style.display = 'none';
        document.getElementById('payment-success').style.display = 'block';
        
        // Here you would normally save the booking data
        console.log('Booking saved:', { ...bookingData, paymentMethod: method });
      }, 3000);
    }

    // Close popup when clicking outside
    document.getElementById('paymentPopup').addEventListener('click', function(e) {
      if (e.target === this) {
        closePaymentPopup();
      }
    });

    // Prevent form submission on Enter key in popup
    document.getElementById('paymentPopup').addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && e.target.tagName !== 'BUTTON') {
        e.preventDefault();
      }
    });

    
  </script>

  <script></script>

</body>

</html>