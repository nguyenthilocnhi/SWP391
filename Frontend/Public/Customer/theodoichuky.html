<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <title>Theo dõi chu kỳ</title>
    <link rel="stylesheet" href="/Frontend/assets/css/theodoichuky.css" />
</head>

<body>
    <!-- gọi header -->
    <div id="header-placeholder"> </div>
    <script>
        fetch('/Frontend/components/header_customer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById("header-placeholder").innerHTML = data;

                // Gọi hàm JS của header sau khi nội dung đã render
                if (typeof initHeader === 'function') {
                    initHeader();
                }
            });
    </script>

    <!-- Gọi file header và khởi động JS sau khi chèn xong -->
    <!-- GỌI HEADER -->
    <div id="header-placeholder"></div>
    <script>
        fetch('/Frontend/components/header_customer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById("header-placeholder").innerHTML = data;

                // Gọi lại hàm JS xử lý header sau khi DOM đã có phần header
                if (typeof initHeader === 'function') {
                    initHeader();
                }
            });
    </script>
    <script src="/Frontend/assets/js/header_customer.js"></script>

    <!-- tạo 1 nhãn thông báo -->
    <div id="alert-box" class="alert-box hidden">
        <p id="alert-message">Bạn có thông báo mới!</p>
        <span id="alert-close">&times;</span>
    </div>

    <h1>THEO DÕI CHU KỲ KINH NGUYỆT</h1>
    <label>Tâm trạng:</label>
    <div id="mood-selector">
        <span class="mood-icon" data-mood="Rất hạnh phúc">😄</span>
        <span class="mood-icon" data-mood="Hạnh phúc">😊</span>
        <span class="mood-icon" data-mood="Bình thường">😐</span>
        <span class="mood-icon" data-mood="Không vui">😕</span>
        <span class="mood-icon" data-mood="Phiền muộn">😢</span>
    </div>

    <p>Tâm trạng bạn chọn: <span id="selected-mood">Chưa chọn</span></p>

    <!-- LỊCH CHÍNH -->
    <div class="calendar-controls">
        <button onclick="changeMainMonth(-1)">❮ Tháng trước</button>
        <h2 id="mainMonthYear"></h2>
        <button onclick="changeMainMonth(1)">Tháng sau ❯</button>
    </div>
    <div id="mainCalendar" class="calendar"></div>

    <!-- Ghi chú màu sắc -->
    <div class="legend">
        <span class="period">Ngày hành kinh</span>
        <span class="fertile">Dễ thụ thai</span>
        <span class="ovulation">Rụng trứng</span>
        <span class="safe">An toàn</span>
    </div>

    <!--DỰ ĐOÁN -->
    <h2>Dự Đoán Chu Kì</h2>
    <div class="calendar-controls">
        <button onclick="changePredictMonth(-1)">❮ Tháng trước</button>
        <h2 id="predictMonthYear"></h2>
        <button onclick="changePredictMonth(1)">Tháng sau ❯</button>
    </div>
    <div id="predictionCalendar" class="calendar"></div>
    <div class="prediction" id="predictionText"></div>

    <h2>Thống kê Chu Kỳ</h2>
    <div id="cycle-warning" style="color: red; font-weight: bold; text-align: center;"></div>
    <canvas id="cycleChart" height="100"></canvas>


    <section class="settings-section">
        <h2>Cài đặt chu kỳ</h2>
        <label>Độ dài kỳ kinh: <input type="number" id="period-length" value="5"> ngày</label>
        <label>Độ dài chu kỳ: <input type="number" id="cycle-length" value="28"> ngày</label>
        <button id="apply-settings">Áp dụng</button>
    </section>

    <section class="partner-link">
        <h2>Liên kết với bạn đời</h2>
        <p class="partner-guide">
            Nhập email của bạn đời để họ cùng theo dõi chu kỳ, nhận nhắc nhở và chăm sóc sức khỏe cùng bạn.
            <br>
            Lưu ý: Bạn đời sẽ nhận được email mời tham gia. Họ cần đồng ý xác nhận thì liên kết mới hoàn tất.
        </p>
        <input type="email" id="partner-email" placeholder="Nhập email bạn đời">
        <button id="share-partner">Chia sẻ theo dõi</button>
    </section>

    <!-- gọi footer -->
    <div id="footer-placeholder"></div>
    <script>
        fetch('/Frontend/components/footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById("footer-placeholder").innerHTML = data;
            });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="/Frontend/assets/js/theodoichuky.js"></script>
</body>

</html>